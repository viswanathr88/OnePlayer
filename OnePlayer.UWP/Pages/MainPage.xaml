<Page x:Class="OnePlayer.UWP.Pages.MainPage"
      xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
      xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
      xmlns:local="using:OnePlayer.UWP"
      xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
      xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
      xmlns:ui="using:Microsoft.UI.Xaml.Controls"
      xmlns:oc="using:OnePlayer.UWP.Controls"
      mc:Ignorable="d"
      Background="{ThemeResource ApplicationPageBackgroundThemeBrush}">

    <Grid>
        <!-- Add custom titlebar that floats on top -->
        <oc:Titlebar x:Name="Titlebar"
                     x:Uid="Titlebar"
                     AppName=""
                     IsBackButtonVisible="{x:Bind ContentFrame.CanGoBack, Mode=OneWay}"
                     VerticalContentAlignment="Center"
                     VerticalAlignment="Top"
                     Canvas.ZIndex="1000"
                     BackRequested="Titlebar_BackRequested"/>

        <ui:NavigationView x:Name="NavView"
                           Grid.Row="1"
                           PaneDisplayMode="LeftMinimal"
                           Loaded="NavView_Loaded"
                           ItemInvoked="NavView_ItemInvoked"
                           IsBackButtonVisible="Collapsed"
                           IsTitleBarAutoPaddingEnabled="True">

            <ui:NavigationView.Header>
                <Grid x:Name="NavViewHeaderContainer"
                      >
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*" />
                        <ColumnDefinition Width="Auto" />
                    </Grid.ColumnDefinitions>
                    
                    <!-- Header Text -->
                    <TextBlock x:Name="NavViewHeaderText"
                               Text=""
                               VerticalAlignment="Top"
                               Style="{StaticResource SubtitleTextBlockStyle}" />
                    
                    <!-- Header Toolbar -->
                    
                </Grid>
            </ui:NavigationView.Header>

            <ui:NavigationView.MenuItems>
                <ui:NavigationViewItem Tag="home"
                                       x:Uid="NavViewHome"
                                       Content="">
                    <ui:NavigationViewItem.Icon>
                        <FontIcon FontFamily="Segoe MDL2 Assets"
                                  Glyph="&#xE80F;" />
                    </ui:NavigationViewItem.Icon>
                </ui:NavigationViewItem>
                <ui:NavigationViewItem Tag="library"
                                       x:Uid="NavViewLibrary"
                                       Content="">
                    <ui:NavigationViewItem.Icon>
                        <FontIcon FontFamily="Segoe MDL2 Assets"
                                  Glyph="&#xEC4F;" />
                    </ui:NavigationViewItem.Icon>
                </ui:NavigationViewItem>
                <ui:NavigationViewItem Tag="playlists"
                                       x:Uid="NavViewPlaylists"
                                       Content="">
                    <ui:NavigationViewItem.Icon>
                        <FontIcon FontFamily="Segoe MDL2 Assets"
                                  Glyph="&#xE90B;" />
                    </ui:NavigationViewItem.Icon>
                </ui:NavigationViewItem>
                <ui:NavigationViewItemSeparator x:Name="NavViewFirstSeparator" />
                <ui:NavigationViewItem Tag="nowplaying"
                                       x:Uid="NavViewNowPlaying"
                                       Content="">
                    <ui:NavigationViewItem.Icon>
                        <FontIcon FontFamily="Segoe MDL2 Assets"
                                  Glyph="&#xEA37;" />
                    </ui:NavigationViewItem.Icon>
                </ui:NavigationViewItem>

                <ui:NavigationViewItem Tag="syncstatus"
                                       x:Uid="NavViewSyncStatus"
                                       x:Name="NavViewSyncStatus"
                                       Content="">
                    <ui:NavigationViewItem.Icon>
                        <FontIcon FontFamily="Segoe MDL2 Assets"
                                  Glyph="&#xE895;" />
                    </ui:NavigationViewItem.Icon>
                </ui:NavigationViewItem>

            </ui:NavigationView.MenuItems>

            <ui:NavigationView.AutoSuggestBox>
                <!-- See AutoSuggestBox documentation for
                 more info about how to implement search. -->
                <AutoSuggestBox x:Name="NavViewSearchBox"
                                x:Uid="NavViewSearchBox"
                                PlaceholderText=""
                                QueryIcon="Find" />
            </ui:NavigationView.AutoSuggestBox>

            <ui:NavigationView.PaneFooter>
                <ui:NavigationViewItem Tag="syncstatus"
                                       x:Uid="NavViewSyncStatusFooter"
                                       x:Name="NavViewSyncStatusFooter"
                                       Content=""
                                       Visibility="Collapsed">
                    <ui:NavigationViewItem.Icon>
                        <FontIcon FontFamily="Segoe MDL2 Assets"
                                  Glyph="&#xE895;" />
                    </ui:NavigationViewItem.Icon>
                </ui:NavigationViewItem>
            </ui:NavigationView.PaneFooter>

            <ScrollViewer>
                <Frame x:Name="ContentFrame"
                       Padding="12,12,12,24"
                       IsTabStop="True"
                       Navigated="ContentFrame_Navigated"
                       NavigationFailed="ContentFrame_NavigationFailed" />
            </ScrollViewer>

        </ui:NavigationView>

        <VisualStateManager.VisualStateGroups>
            <VisualStateGroup>
                <VisualState>
                    <VisualState.StateTriggers>
                        <AdaptiveTrigger MinWindowWidth="{x:Bind NavView.ExpandedModeThresholdWidth}" />
                    </VisualState.StateTriggers>

                    <VisualState.Setters>
                        <Setter Target="NavView.PaneDisplayMode"
                                Value="Top" />
                        <Setter Target="NavViewSearchBox.Width"
                                Value="250" />
                        <Setter Target="NavView.AlwaysShowHeader"
                                Value="False" />
                        <Setter Target="NavViewSyncStatusFooter.Visibility"
                                Value="Visible" />
                        <Setter Target="NavViewSyncStatus.Visibility"
                                Value="Collapsed" />
                    </VisualState.Setters>
                </VisualState>

                <!--<VisualState>
                    <VisualState.StateTriggers>
                        <AdaptiveTrigger MinWindowWidth="{x:Bind NavView.ExpandedModeThresholdWidth}" />
                    </VisualState.StateTriggers>

                    <VisualState.Setters>
                        <Setter Target="NavView.PaneDisplayMode"
                                Value="Left" />
                    </VisualState.Setters>
                </VisualState>-->

                <VisualState>
                    <VisualState.StateTriggers>
                        <AdaptiveTrigger MinWindowWidth="{x:Bind NavView.CompactModeThresholdWidth}" />
                    </VisualState.StateTriggers>

                    <VisualState.Setters>
                        <Setter Target="NavView.PaneDisplayMode"
                                Value="LeftCompact" />
                        <Setter Target="NavViewFirstSeparator.Visibility"
                                Value="Collapsed" />
                    </VisualState.Setters>
                </VisualState>
            </VisualStateGroup>
        </VisualStateManager.VisualStateGroups>


    </Grid>
</Page>
